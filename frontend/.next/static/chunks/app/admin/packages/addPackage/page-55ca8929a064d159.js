(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{2592:(e,a,t)=>{Promise.resolve().then(t.bind(t,7221))},6046:(e,a,t)=>{"use strict";var l=t(6658);t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(a,{useSearchParams:function(){return l.useSearchParams}})},7221:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var l=t(5155),s=t(2115),r=t(6046),i=t(6197);let n=()=>{let e=(0,r.useRouter)(),[a,t]=(0,s.useState)({title:"",description:"",price:"",availableDates:[],image:null}),[n,d]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),b=e=>{let{name:l,value:s,type:r}=e.target;if("file"===r){var i;let l=(null===(i=e.target.files)||void 0===i?void 0:i[0])||null;if(l){let e=new FileReader;e.readAsDataURL(l),e.onload=()=>{let l=e.result;m(l),t({...a,image:l})}}}else t({...a,[l]:s})},p=async t=>{if(t.preventDefault(),console.log(a.availableDates),0===a.availableDates.length){alert("Please provide at least one valid date.");return}let l=new FormData;l.append("title",a.title),l.append("description",a.description),l.append("price",a.price),l.append("availableDates",JSON.stringify(a.availableDates)),a.image&&l.append("image",a.image);let s=localStorage.getItem("authHeader");if(!s){alert("Authorization header is missing.");return}try{c(!0),await i.S.post("/admin/packages",l,{headers:{Authorization:"Bearer ".concat(s)}}),e.push("/admin")}catch(e){console.error("Error adding package:",e),alert("There was an error adding the package.")}finally{c(!1)}};return(0,l.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Add New Package"}),(0,l.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-semibold",children:"Title"}),(0,l.jsx)("input",{type:"text",name:"title",value:a.title,onChange:b,required:!0,className:"w-full p-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-semibold",children:"Description"}),(0,l.jsx)("textarea",{name:"description",value:a.description,onChange:b,required:!0,className:"w-full p-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-semibold",children:"Price"}),(0,l.jsx)("input",{type:"number",name:"price",value:a.price,onChange:b,required:!0,className:"w-full p-2 border rounded"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-semibold",children:"Available Dates"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"date",value:n,onChange:e=>d(e.target.value),className:"p-2 border rounded"}),(0,l.jsx)("button",{type:"button",onClick:()=>{n&&(t({...a,availableDates:[...a.availableDates,n]}),d(""))},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Add Date"})]}),(0,l.jsx)("ul",{className:"mt-2",children:a.availableDates.map((e,s)=>(0,l.jsxs)("li",{className:"flex items-center justify-between",children:[e,(0,l.jsx)("button",{type:"button",onClick:()=>{let e=a.availableDates.filter((e,a)=>a!==s);t({...a,availableDates:e})},className:"text-red-500 hover:underline",children:"Remove"})]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-semibold",children:"Image"}),(0,l.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:b,required:!0,className:"p-2 border rounded"}),u&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"font-semibold",children:"Image Preview:"}),(0,l.jsx)("img",{src:u,alt:"Image preview",className:"w-32 h-32 object-cover mt-2"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:o,className:"w-full py-2 bg-green-600 text-white font-bold rounded hover:bg-green-700 disabled:bg-gray-400",children:o?"Submitting...":"Submit"})]})]})}},6197:(e,a,t)=>{"use strict";t.d(a,{S:()=>r});var l=t(2651),s=t(2818);let r=l.A.create({baseURL:"development"===s.env.MODE?"http://localhost:5003":"/",headers:{"Content-Type":"application/json"},withCredentials:!0});r.interceptors.request.use(e=>{let a=localStorage.getItem("authHeader");return a&&e.url&&e.url.startsWith("/admin")&&(e.headers.Authorization=a),e})}},e=>{var a=a=>e(e.s=a);e.O(0,[651,441,517,358],()=>a(2592)),_N_E=e.O()}]);